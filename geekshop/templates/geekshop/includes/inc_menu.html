<div class="header clearfix">
    <a href="{% url 'index' %}" class="logo"></a>
    <ul class="menu">
        {% for link in menu %}
            <li><a href="{% url link.href|join:'' %}"
                   class="{% if request.resolver_match.url_name == link.href|join:'' %} active {% endif %}">
                {{ link.name|join:'' }}</a></li>
        {% endfor %}
        <li>
            {% if user.is_authenticated %}
                <div class="dropdown">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown"
                       aria-expanded="false">
                        {{ user.username|default:'Пользователь' }}
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <li>
                            <a class="dropdown-item" href="{% url 'auth:edit' %}">профиль</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="{% url 'ordersapp:orders_list' %}">заказы</a>
                        </li>
                        <li><a href="{% url 'auth:logout' %}">выйти</a></li>
                    </ul>
                </div>
            {% else %}
                <a href="{% url 'auth:login' %}">войти</a>
            {% endif %}
        </li>
        {% if user.is_superuser %}
            <li>
                <a href="{% url 'adminapp:users' %}">админка</a>
            </li>
        {% endif %}
        <li>
            <a href="{% url 'basketapp:view' %}">
                {% if basket %}
                    {{ basket.0.total_cost|floatformat:0 }} руб
                    ({{ basket.0.total_quantity }} шт)
                {% endif %}
            </a>
        </li>
        <li><a href="#" class="search"></a></li>
    </ul>
</div>